{% extends "base.html" %}

{% block core %}
<div class="core_title">
  <h1>Add Training Program</h1>
</div>

<form action="{{ url("training_programs", "add") }}" method="POST" name="add_training_program" style="display:inline;">
  {{ xsrf_form_html|safe }}
  <table class="sub_table">
    <tr>
      <td>Name</td>
      <td><input type="text" name="name" required/></td>
      <td class="hint">A codename for the training program (e.g., "training2025"). A managing contest named "__name" will be created automatically.</td>
    </tr>
    <tr>
      <td>Description</td>
      <td><input type="text" name="description"/></td>
      <td class="hint">Human-readable description (defaults to name if empty)</td>
    </tr>
    <tr>
      <td>Start time</td>
      <td><input type="datetime-local" name="start"/></td>
      <td class="hint">When the training program starts (optional)</td>
    </tr>
    <tr>
      <td>End time</td>
      <td><input type="datetime-local" name="stop"/></td>
      <td class="hint">When the training program ends (optional, must be after start)</td>
    </tr>
  </table>
  <input type="submit" name="operation" value="Create"/>
  <input type="submit" name="operation" value="Create and add another"/>
</form>

<script>
document.forms['add_training_program'].addEventListener('submit', function(e) {
  var start = document.querySelector('input[name="start"]').value;
  var stop = document.querySelector('input[name="stop"]').value;
  if (start && stop && stop <= start) {
    alert('End time must be after start time');
    e.preventDefault();
  }
});
</script>

{% endblock core %}
