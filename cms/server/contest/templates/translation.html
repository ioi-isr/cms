{% extends "contest.html" %}

{% set page = "translation" %}

{% block core %}
<div class="span9">

<div class="page-header">
    <h1>{% trans %}Translation{% endtrans %}</h1>
</div>

<p>{% trans %}Use this tool to translate text between different languages. This can help you understand problem statements and communicate more effectively.{% endtrans %}</p>

{% if error_message is defined and error_message %}
<div class="alert alert-error">
    <strong>{% trans %}Error{% endtrans %}:</strong> {{ _(error_message) }}
</div>
{% endif %}

<form method="POST" action="{{ contest_url("translation") }}" class="form-horizontal">
    {{ xsrf_form_html|safe }}
    
    <div class="control-group">
        <label class="control-label" for="source_lang">{% trans %}Source Language{% endtrans %}</label>
        <div class="controls">
            <select name="source_lang" id="source_lang" class="input-xlarge" required>
                <option value="">{% trans %}Select source language{% endtrans %}</option>
                {% for code, name in supported_languages.items() %}
                <option value="{{ code }}"{% if source_lang == code %} selected{% endif %}>{{ name }}</option>
                {% endfor %}
            </select>
        </div>
    </div>

    <div class="control-group">
        <label class="control-label" for="source_text">{% trans %}Text to Translate{% endtrans %}</label>
        <div class="controls">
            <textarea name="source_text" id="source_text" rows="6" class="input-xxlarge" dir="auto" required>{{ source_text if source_text else "" }}</textarea>
            <span class="help-block">{% trans %}Enter the text you want to translate{% endtrans %}</span>
        </div>
    </div>

    <div class="control-group">
        <label class="control-label" for="target_lang">{% trans %}Target Language{% endtrans %}</label>
        <div class="controls">
            <select name="target_lang" id="target_lang" class="input-xlarge" required>
                <option value="">{% trans %}Select target language{% endtrans %}</option>
                {% for code, name in supported_languages.items() %}
                <option value="{{ code }}"{% if target_lang == code %} selected{% endif %}>{{ name }}</option>
                {% endfor %}
            </select>
        </div>
    </div>

    <div class="control-group">
        <div class="controls">
            <button type="submit" class="btn btn-primary">{% trans %}Translate{% endtrans %}</button>
        </div>
    </div>
</form>

{% if translation_result is defined and translation_result %}
<div class="well" style="margin-top: 20px;">
    <h3>{% trans %}Translation Result{% endtrans %}</h3>
    <div style="padding: 10px; background-color: #f5f5f5; border: 1px solid #ddd; border-radius: 4px; margin-top: 10px;" dir="auto">
        <p style="margin: 0; white-space: pre-wrap; word-wrap: break-word;">{{ translation_result }}</p>
    </div>
</div>
{% endif %}

<div style="margin-top: 30px;">
    <h3>{% trans %}Supported Languages{% endtrans %}</h3>
    <ul>
        {% for code, name in supported_languages.items() %}
        <li>{{ name }}</li>
        {% endfor %}
    </ul>
</div>

</div>
{% endblock core %}
